@inherits AccountPage
@inject BarberchainDbContext Context

@if (ReviewList != null && ReviewList.Count > 0)
{
    <MudPaper Elevation="3" Class="p-4 rounded-lg">
        <MudContainer Style="display:flex; padding-top:1rem;">
            <MudContainer Style="display:flex; flex-direction:column; align-items:flex-start;">
                @foreach (var r in ReviewList)
                {
                    <MudPaper>
                        <MudText>@r.Score</MudText>
                        <MudText>@r.Text</MudText>
                        <MudText>@r.Barber.Account.Lastname</MudText>
                    </MudPaper>
                }
            </MudContainer>
        </MudContainer>
    </MudPaper>
}
else
{
    <MudPaper Elevation="3" Class="p-4 rounded-lg">
        <MudText>
            No reviews found for your account
        </MudText>
    </MudPaper>
}

@code {
    private List<Review> ReviewList { get; set; } = new();

    protected override async Task OnInitializedAsync()
    {
        ReviewList = await Context.Reviews.Where(r => r.AccountId == id).ToListAsync();
    }
}