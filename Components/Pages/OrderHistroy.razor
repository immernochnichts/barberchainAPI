@inject BarberchainDbContext Context
@using MudBlazor

@if (OrderList != null && OrderList.Count > 0)
{
    <MudPaper Elevation="3" Class="p-4 rounded-lg">
        <MudContainer Style="display:flex; padding-top:1rem;">
            <MudContainer Style="display:flex; flex-direction:column; align-items:flex-start;">
                @foreach (var o in OrderList)
                {
                    <MudPaper>
                        <MudText>@o.AppointedTime</MudText>
                        <MudText>@o.Status</MudText>
                        <MudText>@o.OrderTime</MudText>
                        <MudText>@o.Method</MudText>
                        <MudText>@o.OrderJobs.Select(oj => oj.Job.Name)</MudText>
                    </MudPaper>
                }
            </MudContainer>
        </MudContainer>
    </MudPaper>
}
else
{
    <MudPaper Elevation="3" Class="p-4 rounded-lg">
        <MudText>
            No orders found for your account
        </MudText>
    </MudPaper>
}

@code {
    [Parameter]
    public int id { get; set; }

    private List<Order> OrderList { get; set; } = new();

    protected override async Task OnInitializedAsync()
    {
        OrderList = await Context.Orders.Where(o => o.AccountId == id).ToListAsync();
    }
}